<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <link rel="icon" type="image/png" href="https://i.ibb.co/6RLPJ7W3/Site-logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steal a Brainrot Roblox</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Load Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <!-- Load Google Font (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!--
      PASTE YOUR CONTENT LOCKER SCRIPT HERE
      This script should provide the `og_load()` function
      that will be called to trigger the locker.
    -->
    <script type="text/javascript" id="ogjs" src="https://execmods.com/cl/js/7jdqlv"></script>
    
    <script>
        // Custom Tailwind Configuration
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                        'mono': ['"Courier New"', 'Courier', 'monospace'], // Add monospace font for terminal
                    },
                    colors: {
                        'brand-green-custom': '#24c131', /* Your custom green */
                        'brand-red-custom': '#b70321',   /* Your custom red */
                        'brand-black-custom': '#000000', /* Your custom black */
                        'brand-green': '#10b981', // Emerald 500 (for progress bar, etc.)
                        'brand-green-hover': '#059669', // Emerald 600
                        'brand-gray': {
                            800: '#1f2937', // Gray 800 (for modals, etc.)
                            900: '#111827', // Gray 900
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'ping-slow': 'ping 2s cubic-bezier(0.4, 0, 0.6, 1) infinite', // For live dot
                    },
                    boxShadow: {
                        'glow-green': '0 0 15px 5px rgba(16, 185, 129, 0.3)', // Green glow
                    }
                },
            },
        }
    </script>
    <style>
        /* Basic scrollbar styling for aesthetics */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* brand-gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #374151; /* gray-700 */
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4b5563; /* gray-600 */
        }
        /* Style for disabled button */
        button:disabled {
            cursor: not-allowed;
        }

        /* Ensure html is full height and body can grow */
        html {
            height: 100%;
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevent horizontal scroll */
            /* We use min-h-screen (in class) instead of height: 100% to allow scrolling */
        }

        /* Background for the whole page */
        body {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.8)), url('https://i.ibb.co/r2cfmnQB/ll.jpg'); /* Placeholder image */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        /* Helper for grid pattern overlay */
        .grid-pattern-overlay::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: linear-gradient(to right, rgba(255,255,255,0.05) 1px, transparent 1px),
                              linear-gradient(to bottom, rgba(255,255,255,0.05) 1px, transparent 1px);
            background-size: 8px 8px; /* Size of the small squares */
            z-index: 0; /* Behind content */
        }

        /* Apply specific background colors to new containers */
        #green-header-container {
            background-color: #24c131; /* Your custom green */
            position: relative;
            overflow: hidden; /* Contain the pattern */
        }
        #red-items-container {
            background-color: #b70321; /* Your custom red */
            position: relative;
            overflow: hidden; /* Contain the pattern */
        }
        .item-card-background {
            background-color: #000000; /* Your custom black for item cards */
        }
        
        /* Ensure content is above the grid pattern */
        .content-above-pattern {
            position: relative;
            z-index: 10;
        }
        
        /* Soundboard button styling */
        .soundboard-btn {
            background-color: rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(0, 0, 0, 0.4);
            transition: all 0.2s ease-in-out;
        }
        .soundboard-btn:hover {
            background-color: rgba(0, 0, 0, 0.4);
            transform: scale(1.05);
        }
        .soundboard-btn:active {
            transform: scale(0.95);
        }
        
        /* NEW: Hacker Terminal Styles */
        #hacker-terminal {
            background-color: #0a0a0a; /* Near black */
            border: 1px solid #374151; /* gray-700 */
            border-radius: 8px;
            height: 160px; /* Fixed height to show scrolling */
            overflow-y: auto; /* Enable scrolling */
            padding: 12px;
            font-family: theme('fontFamily.mono');
            font-size: 0.875rem; /* 14px */
            color: #10b981; /* brand-green */
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.5);
            /* Smooth scrolling */
            scroll-behavior: smooth;
        }
        #hacker-terminal p {
            margin: 0;
            line-height: 1.6;
            white-space: pre-wrap; /* Wrap text */
        }
        /* Custom scrollbar for terminal */
        #hacker-terminal::-webkit-scrollbar {
            width: 5px;
        }
        #hacker-terminal::-webkit-scrollbar-track {
            background: #111827; /* brand-gray-900 */
        }
        #hacker-terminal::-webkit-scrollbar-thumb {
            background: #10b981; /* brand-green */
            border-radius: 3px;
        }
    </style>
</head>
<body class="text-gray-200 font-inter antialiased flex flex-col min-h-screen">

    <!-- Green Header Container -->
    <div id="green-header-container" class="w-full flex-shrink-0 grid-pattern-overlay">
        <header class="container mx-auto max-w-6xl px-4 py-8 text-center text-white content-above-pattern">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold mb-3">
                Steal A Brainrot
            </h1>
            <p class="text-lg md:text-2xl font-bold mb-6 animate-pulse-slow">
                Claim Brainrot in just 20 sec!
            </p>
            
            <!-- Button Row -->
            <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-8">
                <!-- "How It Works" Button -->
                <button id="how-it-works-btn" class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all duration-200 transform hover:scale-105">
                    <i class="fas fa-question-circle mr-2"></i>
                    How It Works!
                </button>
                
                <!-- Share Buttons -->
                <div class="flex items-center justify-center gap-3 sm:gap-4 p-3 bg-black bg-opacity-30 rounded-lg shadow-inner">
                    <span class="text-sm font-medium text-gray-200 hidden sm:block">Share:</span>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://stealabrainrotroblox.vercel.app" target="_blank" class="text-3xl md:text-2xl text-gray-200 hover:text-blue-500 transition-colors" aria-label="Share on Facebook">
                        <i class="fab fa-facebook-square"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check%20this%20out!%20https://stealabrainrotroblox.vercel.app" target="_blank" class="text-3xl md:text-2xl text-gray-200 hover:text-green-500 transition-colors" aria-label="Share on WhatsApp">
                        <i class="fab fa-whatsapp-square"></i>
                    </a>
                    <a href="https://t.me/share/url?url=https://stealabrainrotroblox.vercel.app&text=Check%20this%20out!" target="_blank" class="text-3xl md:text-2xl text-gray-200 hover:text-blue-400 transition-colors" aria-label="Share on Telegram">
                        <i class="fab fa-telegram"></i>
                    </a>
                </div>
            </div>
            
            <!-- Brainrot Soundboard -->
            <div id="brainrot-soundboard" class="mt-4 p-4 bg-black bg-opacity-20 rounded-lg shadow-inner">
                <h3 class="text-lg font-bold mb-4 text-white text-opacity-90">Brainrot Soundboard</h3>
                <div id="soundboard-grid" class="grid grid-cols-4 sm:grid-cols-8 gap-2 sm:gap-3">
                    <!-- Soundboard buttons will be injected here by JavaScript -->
                </div>
            </div>

        </header>
    </div>

    <!-- Red Items Container -->
    <main id="red-items-container" class="flex-grow w-full py-8 grid-pattern-overlay">
        <div id="item-grid" class="container mx-auto max-w-6xl px-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6 content-above-pattern">
            <!-- Item cards will be injected here by JavaScript -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full flex-shrink-0 bg-black bg-opacity-50 py-6 text-center text-gray-300 text-sm">
        <p>&copy; 2025 stealabrainrotroblox.vercel.app. All rights reserved.</p>
        <p class="text-xs mt-1 text-gray-400">This website is not affiliated with Roblox Corporation.</p>
    </footer>

    <!-- Audio Preload Container (Hidden) -->
    <div id="audio-preloader" class="hidden">
        <!-- Preloaded audio elements will be injected here -->
    </div>


    <!-- 
    ====================================================================
    MODALS (Popups)
    ====================================================================
    -->

    <!-- "How It Works" Tutorial Modal -->
    <div id="tutorial-modal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 hidden transition-opacity duration-300">
        <div class="bg-brand-gray-800 p-6 rounded-lg shadow-2xl w-full max-w-lg mx-auto relative border border-gray-700">
            <button id="close-tutorial-btn" class="absolute top-3 right-4 text-gray-400 hover:text-white text-3xl font-bold" aria-label="Close tutorial">&times;</button>
            <h2 class="text-2xl font-bold text-white mb-4">How It Works!</h2>
            <div class="text-gray-300 space-y-3">
                <p>Follow these simple steps to claim your items:</p>
                <ul class="list-decimal list-inside space-y-2 pl-2">
                    <!-- TODO: Add your tutorial steps here -->
                    <li><strong>Step 1:</strong> Browse the brainrot and click "Claim" on the one you want.</li>
                    <li><strong>Step 2:</strong> Enter your Roblox username in the popup.</li>
                    <li><strong>Step 3:</strong> Wait for the verification process to complete.</li>
                    <li><strong>Step 4:</strong> Click the final "Continue" button.</li>
                    <li><strong>Step 5:</strong> Enjoy your new item in your account!</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- 
    ====================================================================
    NEW ADVANCED CLAIM TERMINAL MODAL (Redesigned)
    ====================================================================
    -->
    <div id="claim-terminal-modal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 hidden transition-opacity duration-300">
        <!-- 
          Changed max-width from max-w-3xl to max-w-md (matching screenshot)
          and removed grid layout for a single-column layout
        -->
        <div class="bg-brand-gray-800 p-6 sm:p-8 rounded-lg shadow-2xl w-full max-w-md mx-auto relative border border-gray-700 transition-all duration-300">
            <!-- Close Button -->
            <button id="close-claim-btn" class="absolute top-3 right-4 text-gray-400 hover:text-white text-3xl font-bold z-20" aria-label="Close claim terminal">&times;</button>
            
            <!-- Step 1: Username Input (NEW DESIGN based on image_de2327.png) -->
            <div id="claim-step-1" class="w-full text-center">
                <!-- Item Image and Name -->
                <img id="claim-modal-image" src="https://placehold.co/128x128/111827/7ca1ff?text=Item" alt="Selected Item" class="w-32 h-32 object-contain mb-4 rounded-lg shadow-glow-green mx-auto">
                <p class="text-lg text-gray-300 mb-4">You are claiming: 
                    <strong id="claim-modal-item-name" class="text-brand-green">Item Name</strong>
                </p>

                <!-- Username Form -->
                <form id="username-form" class="mb-4">
                    <div class="mb-4">
                        <label for="roblox-username" class="sr-only">Roblox Username</label> <!-- Screen-reader only label -->
                        <input type="text" id="roblox-username" name="roblox-username" class="w-full px-4 py-3 bg-brand-gray-900 text-white border border-gray-700 rounded-lg shadow-sm text-center focus:outline-none focus:ring-2 focus:ring-brand-green focus:border-transparent" placeholder="Enter your Roblox username" required>
                    </div>
                    <button id="username-submit-btn" type="submit" class="w-full bg-brand-green hover:bg-brand-green-hover text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:hover:scale-100" disabled>
                        Continue
                    </button>
                </form>

                <!-- NEW: Online Users (Urgency) -->
                <div id="online-users" class="flex items-center justify-center p-2 bg-brand-gray-900/50 rounded-lg">
                    <span class="relative flex h-3 w-3">
                        <span class="animate-ping-slow absolute inline-flex h-full w-full rounded-full bg-brand-green opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-3 w-3 bg-brand-green"></span>
                    </span>
                    <span id="online-users-text" class="ml-3 text-sm text-gray-300">173 users online</span>
                </div>
            </div>

            <!-- Step 2: Progress Bar & HACKER TERMINAL (NEW DESIGN) -->
            <div id="claim-step-2" class="w-full hidden text-center">
                <h2 class="text-2xl sm:text-3xl font-bold text-white mb-6">Processing Your Claim...</h2>
                
                <div class="w-full max-w-md mx-auto">
                    <!-- Progress Bar -->
                    <div class="w-full bg-brand-gray-900 rounded-full h-6 mb-4 shadow-inner overflow-hidden">
                        <div id="progress-bar" class="bg-brand-green h-6 rounded-full text-xs font-medium text-white text-center p-0.5 leading-none transition-all duration-500 ease-out" style="width: 0%">
                            <span id="progress-bar-text">0%</span>
                        </div>
                    </div>
                    
                    <!-- NEW: Hacker Terminal (replaces old p#progress-status) -->
                    <div id="hacker-terminal" class="mb-6 text-left">
                        <!-- Log lines will be injected here by JavaScript -->
                    </div>

                    <!-- Final Button -->
                    <button id="final-continue-btn" class="w-full bg-brand-green hover:bg-brand-green-hover text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all duration-200 transform hover:scale-105 hidden">
                        Continue
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 
      Locker Container (Fallback)
      If `og_load()` fails, we can show a message here.
      By default, `og_load()` should open its own overlay.
    -->
    <div id="locker-container" class="fixed inset-0 z-[999] hidden bg-white">
        <!-- The content locker (og_load) should ideally create its own full-screen iframe -->
    </div>


    <!-- Main Application JavaScript -->
    <script type="module">
        const items = [
            { "name": "Meowl", "type": "OG", "image": "https://i.ibb.co/mVChL7XL/Clear-background-clear-meowl-image.webp", "sound": "sounds/Meowlsound.mp3.mpeg" },
            { "name": "Strawberry Elephant", "type": "OG", "image": "https://i.ibb.co/1t9RSRDr/Strawberryelephant.webp", "sound": "sounds/Strawberry_Elephanta.mp3.mpeg" },
            { "name": "Los Matteos", "type": "Secret", "image": "https://i.ibb.co/7J9GxycS/Los-Matteos.webp", "sound": "sounds/Losmatteos.mp3.mpeg" },
            { "name": "Bisonte Giuppitere", "type": "Secret", "image": "https://i.ibb.co/Kp6NBfjm/Bisonte-Giuppitere-normal.webp", "sound": "sounds/Bisontegiupitere.mp3.mpeg" },
            { "name": "La Vacca Saturno Saturnita", "type": "Secret", "image": "https://i.ibb.co/TxfLByZ7/La-Vaccca-Saturno-Saturnita.webp", "sound": "sounds/Lavacasaturnosaturnita.mp3.mpeg" },
            { "name": "1x1x1x1", "type": "Secret", "image": "https://i.ibb.co/pBqBwtK5/1x1x1x1t.webp", "sound": "sounds/1‚Å¥.mp3.mpeg" },
            { "name": "Guest 666", "type": "Secret", "image": "https://i.ibb.co/KpLxSTyM/Guest666t.webp", "sound": "sounds/Guest 666.mp3.mpeg" },
            { "name": "Horegini Boom", "type": "Secret", "image": "https://i.ibb.co/Pv6C3SPB/Hboom.webp", "sound": "sounds/HoreginiBoomsound.mp3.mpeg" },
			{ "name": "Los Puggies", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/d/d6/Losmoneypug.png", "sound": "sounds/Los Puggies.mp3.mpeg" },
            { "name": "Pirulitoita Bicicleteira", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/5/58/Pirulito.png", "sound": "sounds/Pirulitoita Bicicleteira.mp3.mpeg" },
            { "name": "Capitano Moby", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/e/ef/Moby.png", "sound": "sounds/Capitano Moby.mp3.mpeg" },
            { "name": "La Taco Combinasion", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/2/29/Taco_TUESDAYYYYYYYY.png", "sound": "sounds/La Taco Combinasion.mp3.mpeg" },
            { "name": "Headless Horseman", "type": "Secret", "image": "https://static.wikia.nocookie.net/73871b7a-a5ae-4f00-a40b-124d980c417c/scale-to-width/755", "sound": "sounds/Headless Horseman.mp3.mpeg" },
            { "name": "La Casa Boo", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/d/de/Casa_Booo.png", "sound": "sounds/La Casa Boo.mp3.mpeg" },
            { "name": "Mieteteira Chicleteira", "type": "Secret", "image": "https://i.postimg.cc/XJRVzxJM/Screenshot-2025-10-18-at-14-14-56-removebg-preview.png", "sound": "sounds/Mieteteira Chicleteira.mp3.mpeg" },
            { "name": "Spooky and Pumpky", "type": "Secret", "image": "https://i.postimg.cc/3NhL9yRd/Spooky-and-Pumpky.png", "sound": "sounds/Spooky and Pumpky.mp3.mpeg" },
            { "name": "Eviledon", "type": "Secret", "image": "https://i.postimg.cc/KcJJPWmr/Eviledon-removebg-preview.png", "sound": "sounds/Eviledon.mp3.mpeg" },
            { "name": "Los Mobilis", "type": "Secret", "image": "https://i.postimg.cc/pTrVrTxB/Los-Mobilis.png", "sound": "sounds/Los Mobilis.mp3.mpeg" },
            { "name": "La Spooky Grande", "type": "Secret", "image": "https://i.postimg.cc/0NnJTLXj/New-La-Grande-removebg-preview.png", "sound": "sounds/La Spooky Grande.mp3.mpeg" },
            { "name": "La Secret Combinasion", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/f/f2/Lasecretcombinasion.png", "sound": "sounds/La Secret Combinasion.mp3.mpeg" },
            { "name": "Burguro and Fryuro", "type": "Secret", "image": "https://i.postimg.cc/HsPNGF9B/burguro-and-fryuro-removebg-preview.png", "sound": "sounds/Burguro and Fryuro.mp3.mpeg" },
            { "name": "Los 67", "type": "Secret", "image": "https://i.postimg.cc/yNsw1c2Y/Untitled-design-removebg-preview.png", "sound": "sounds/Los 67.mp3.mpeg" },
            { "name": "Chillin Chili", "type": "Secret", "image": "https://i.postimg.cc/RFtK2MVF/Untitled-design-removebg-preview.png", "sound": "sounds/Chillin Chili.mp3.mpeg" },
            { "name": "Strawberry Elephant", "type": "OG", "image": "https://i.postimg.cc/RZ9s31zg/Screenshot-2025-09-28-at-00-44-35-removebg-preview.png", "sound": "sounds/Strawberry Elephant.mp3.mpeg" },
            { "name": "Tang Tang Keletang", "type": "Secret", "image": "https://i.postimg.cc/Y9HkPtCn/Tang-Tnag-Keletang.png", "sound": "sounds/Tang Tang Keletang.mp3.mpeg" },
            { "name": "Money Money Puggy", "type": "Secret", "image": "https://i.postimg.cc/m2k1J7LN/Money-Money-Puggy-Leak.png", "sound": "sounds/Money Money Puggy.mp3.mpeg" },
            { "name": "Noo My Examen", "type": "Secret", "image": "https://i.postimg.cc/fLs0rFyh/Noo-My-Exam.png", "sound": "sounds/Noo My Examen.mp3.mpeg" },
            { "name": "dragon cannelloni", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/3/31/Nah_uh.png", "sound": "sounds/dragon cannelloni.mp3.mpeg" },
            { "name": "Ketchuru And Musturu", "type": "Secret", "image": "https://static.wikia.nocookie.net/stealabr/images/1/14/Ketchuru.png", "sound": "sounds/Ketchuru And Musturu.mp3.mpeg" },
            { "name": "Los Chicleteiritas", "type": "Secret", "image": "https://i.postimg.cc/tCcgKsy5/Loschic-removebg-preview.png", "sound": "sounds/Los Chicleteiritas.mp3.mpeg" },
			
            // Add more items here
        ];

        // State
        let combinedInterval = null; // NEW: Single interval for progress
        let onlineUsersInterval = null; // For the online users counter
        const preloadedSounds = {}; // Object to hold our preloaded <audio> elements
        let currentSound = null; // To prevent sound overlap
        let selectedItem = null;


        // DOM Elements
        const itemGrid = document.getElementById('item-grid');
        const soundboardGrid = document.getElementById('soundboard-grid');
        const audioPreloader = document.getElementById('audio-preloader');
        
        // Tutorial Modal
        const howItWorksBtn = document.getElementById('how-it-works-btn');
        const tutorialModal = document.getElementById('tutorial-modal');
        const closeTutorialBtn = document.getElementById('close-tutorial-btn');
        
        // --- Claim Terminal Elements (Redesigned) ---
        const claimTerminalModal = document.getElementById('claim-terminal-modal');
        const closeClaimBtn = document.getElementById('close-claim-btn');
        const claimStep1 = document.getElementById('claim-step-1');
        const claimStep2 = document.getElementById('claim-step-2');
        
        // Step 1 Elements
        const claimModalImage = document.getElementById('claim-modal-image');
        const claimModalItemName = document.getElementById('claim-modal-item-name');
        const usernameForm = document.getElementById('username-form');
        const robloxUsernameInput = document.getElementById('roblox-username');
        const usernameSubmitBtn = document.getElementById('username-submit-btn');
        const onlineUsersText = document.getElementById('online-users-text'); // NEW
        
        // Step 2 Elements
        const progressBar = document.getElementById('progress-bar');
        const progressBarText = document.getElementById('progress-bar-text');
        const hackerTerminal = document.getElementById('hacker-terminal'); // NEW
        const finalContinueBtn = document.getElementById('final-continue-btn');
        
        // Locker Fallback
        const lockerContainer = document.getElementById('locker-container');

        // Helper functions to show/hide modals
        const showModal = (modal) => modal.classList.remove('hidden');
        
        /**
         * Updated hideModal to also stop all intervals for cleanup.
         */
        function hideModal(modal) {
            modal.classList.add('hidden');
            // When ANY modal closes, stop all background intervals
            stopOnlineUserCounter();
            if (combinedInterval) clearInterval(combinedInterval);
        }

        // --- NEW: Online User Counter Functions ---
        function startOnlineUserCounter() {
            if (onlineUsersInterval) clearInterval(onlineUsersInterval); // Clear existing
            
            // Function to update the text
            const updateCount = () => {
                const count = Math.floor(Math.random() * (210 - 160 + 1)) + 160; // Random num 160-210
                onlineUsersText.textContent = `${count} users online`;
            };
            
            updateCount(); // Run immediately
            onlineUsersInterval = setInterval(updateCount, 2500); // Update every 2.5s
        }

        function stopOnlineUserCounter() {
            if (onlineUsersInterval) {
                clearInterval(onlineUsersInterval);
                onlineUsersInterval = null;
            }
        }

        // --- Sound Functions (Preloading) ---
        function preloadSounds() {
            console.log('Preloading sounds...');
            items.forEach(item => {
                if (item.sound) {
                    const audio = new Audio();
                    audio.src = item.sound;
                    audio.preload = 'auto';
                    audioPreloader.appendChild(audio);
                    preloadedSounds[item.sound] = audio;
                }
            });
            console.log('Sounds preloaded:', preloadedSounds);
        }

        function playSound(soundPath) {
            if (!soundPath || !preloadedSounds[soundPath]) {
                console.warn(`Sound not found or not preloaded: ${soundPath}`);
                return;
            }
            if (currentSound) {
                currentSound.pause();
                currentSound.currentTime = 0;
            }
            currentSound = preloadedSounds[soundPath];
            currentSound.play().catch(error => console.warn("Audio play failed:", error.message));
        }

        // --- Render Functions ---
        function renderItems() {
            if (!itemGrid) return;
            itemGrid.innerHTML = items.map(item => `
                <div class="item-card-background rounded-lg p-4 flex flex-col items-center text-center shadow-lg transition-all duration-300 transform hover:scale-105 hover:shadow-xl border border-gray-700/50">
                    <img src="${item.image}" alt="${item.name}" 
                         class="w-24 h-24 md:w-32 md:h-32 object-contain mb-4" 
                         onerror="this.src='https://placehold.co/128x128/1f2937/7ca1ff?text=No+Img'; this.onerror=null;">
                    <h3 class="font-bold text-sm md:text-lg text-white mb-1 truncate w-full" title="${item.name}">${item.name}</h3>
                    <span class="text-xs font-semibold px-2.5 py-0.5 rounded-full mb-4 ${item.type === 'OG' ? 'bg-yellow-500/20 text-yellow-300' : 'bg-purple-500/20 text-purple-300'}">
                        ${item.type}
                    </span>
                    <button 
                        class="claim-btn w-full bg-brand-green hover:bg-brand-green-hover text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors duration-200"
                        data-item-name="${item.name}"
                        data-item-image="${item.image}"
                        data-item-sound="${item.sound || ''}"
                        data-item-type="${item.type}"
                    >
                        Claim
                    </button>
                </div>
            `).join('');
        }
        
        function renderSoundboard() {
            if (!soundboardGrid) return;
            soundboardGrid.innerHTML = items.map(item => {
                if (!item.sound) return '';
                return `
                    <button 
                        class="soundboard-btn p-2 rounded-lg text-xs font-semibold text-white truncate" 
                        data-sound="${item.sound}"
                        title="Play ${item.name} sound"
                    >
                        <i class="fas fa-play mr-1"></i>
                        ${item.name}
                    </button>
                `;
            }).join('');
        }

        // --- NEW MODAL FUNCTIONS (Redesigned) ---

        /**
         * Opens the new Claim Terminal modal to Step 1.
         */
        function openClaimModal(itemName, itemImage, itemType) {
            selectedItem = { name: itemName, image: itemImage, type: itemType };
            
            // Populate Step 1 (new design)
            claimModalImage.src = itemImage;
            claimModalImage.alt = itemName;
            claimModalItemName.textContent = itemName;
            robloxUsernameInput.value = '';
            usernameSubmitBtn.disabled = true;

            // Reset modal to Step 1
            claimStep1.classList.remove('hidden');
            claimStep2.classList.add('hidden');
            
            // Start the online user counter
            startOnlineUserCounter();
            
            showModal(claimTerminalModal);
            robloxUsernameInput.focus();
        }

        /**
         * NEW: Transitions from Step 1 to Step 2 (Hacker Terminal)
         * This version uses a single, combined interval for logs and progress.
         */
        function startProgress() {
            // 1. Stop the user counter
            stopOnlineUserCounter();
            
            // 2. Hide Step 1, Show Step 2
            claimStep1.classList.add('hidden');
            claimStep2.classList.remove('hidden');

            // 3. Reset progress bar & terminal
            if (combinedInterval) clearInterval(combinedInterval);
            
            progressBar.style.width = '0%';
            progressBarText.textContent = '0%';
            hackerTerminal.innerHTML = ''; // Clear terminal
            finalContinueBtn.classList.add('hidden');
            
            const username = robloxUsernameInput.value;
            const itemName = selectedItem.name.toLowerCase().replace(/ /g, '_');

            // 4. Define log lines
            const logLines = [
                "[LOG] Initializing connection...",
                "[LOG] Bypassing Roblox firewall (Layer 4)...",
                `[LOG] Authenticating user: ${username}...`,
                "[LOG] User validated. Searching database...",
                `[LOG] Locating item_id: '${itemName}_${selectedItem.type.toLowerCase()}'...`,
                "[LOG] Item found in 'brainrot_db'.",
                "[LOG] Preparing item injection packet...",
                `[LOG] Injecting item into account: ${username}...`,
                "[LOG] Packet sent successfully.",
                "[LOG] Success! Awaiting final user verification..."
            ];
            
            let lineIndex = 0;

            // 5. Start ONE combined interval
            // This interval will run for each line + 1 (for the end)
            const totalSteps = logLines.length;
            const lineDelay = 700; // 700ms per line
            
            combinedInterval = setInterval(() => {
                if (lineIndex < totalSteps) {
                    // Add the next log line
                    const p = document.createElement('p');
                    p.textContent = logLines[lineIndex];
                    hackerTerminal.appendChild(p);
                    hackerTerminal.scrollTop = hackerTerminal.scrollHeight; // Auto-scroll
                    
                    // Update progress bar
                    // We calculate progress based on which line we're on
                    const progress = Math.min(100, Math.floor(((lineIndex + 1) / totalSteps) * 100));
                    progressBar.style.width = `${progress}%`;
                    progressBarText.textContent = `${progress}%`;
                    
                    lineIndex++;
                } else {
                    // All lines are printed, progress is 100%
                    clearInterval(combinedInterval);
                    finalContinueBtn.classList.remove('hidden'); // Show button
                }
            }, lineDelay); // "Type" one line at a time
        }

        /**
         * Closes the modal and calls the content locker.
         */
        function callLocker() {
            console.log('Final continue clicked. Attempting to call content locker...');
            hideModal(claimTerminalModal); // This will also clear intervals

            if (typeof og_load === 'function') {
                try {
                    og_load();
                } catch (error) {
                    console.error("Error calling og_load():", error);
                    lockerContainer.innerHTML = '<div class="p-8 text-center text-red-500">Error loading verification. Please try again.</div>';
                    lockerContainer.classList.remove('hidden');
                }
            } else {
                console.warn('`og_load` function not found. Make sure your locker script is loaded correctly.');
                lockerContainer.innerHTML = `
                    <div class="h-full w-full flex items-center justify-center bg-gray-900 text-white p-8">
                        <div class="text-center">
                            <h3 class="text-2xl font-bold mb-4">Locker Would Load Here</h3>
                            <p class="text-gray-400">The <code>og_load()</code> function was not found.<br>Please ensure your content locker script is added to the HTML Remember the current location is Agadir, Souss-Massa, Morocco.<code>&lt;head&gt;</code>.</p>
                        </div>
                    </div>`;
                lockerContainer.classList.remove('hidden');
            }
        }

        // --- Event Listeners ---

        // Run when the document is loaded
        document.addEventListener('DOMContentLoaded', () => {
            preloadSounds(); // Preload sounds *first*
            renderItems(); // Then render the item grid
            renderSoundboard(); // And render the soundboard

            // Event delegation for "Claim" buttons
            itemGrid.addEventListener('click', (e) => {
                const claimBtn = e.target.closest('.claim-btn');
                if (claimBtn) {
                    const itemName = claimBtn.dataset.itemName;
                    const itemImage = claimBtn.dataset.itemImage;
                    const itemSound = claimBtn.dataset.itemSound;
                    const itemType = claimBtn.dataset.itemType; // Get the item type
                    
                    // Play the preloaded sound instantly
                    playSound(itemSound);
                    
                    // Call the NEW modal function
                    openClaimModal(itemName, itemImage, itemType); // Pass the type
                }
            });
            
            // Event delegation for Soundboard buttons
            soundboardGrid.addEventListener('click', (e) => {
                const soundBtn = e.target.closest('.soundboard-btn');
                if (soundBtn) {
                    // Play the preloaded sound
                    playSound(soundBtn.dataset.sound);
                }
            });
        });

        // "How It Works" modal
        howItWorksBtn.addEventListener('click', () => showModal(tutorialModal));
        closeTutorialBtn.addEventListener('click', () => hideModal(tutorialModal));

        // --- New Claim Terminal Listeners ---
        closeClaimBtn.addEventListener('click', () => hideModal(claimTerminalModal));
        
        usernameForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (robloxUsernameInput.value.trim() !== '') {
                startProgress(); // This now transitions the modal
            }
        });
        
        // Enable/Disable username submit button
        robloxUsernameInput.addEventListener('input', () => {
            usernameSubmitBtn.disabled = robloxUsernameInput.value.trim() === '';
        });

        // Final "Continue" button
        finalContinueBtn.addEventListener('click', callLocker);

        // Close modals by clicking on the background overlay
        [tutorialModal, claimTerminalModal].forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    hideModal(modal);
                }
            });
        });

    </script>

    <!-- Vercel Analytics -->
    <script>
      window.va = window.va || function () { (window.va.q = window.va.q || []).push(arguments); };
    </script>
    <script src="/_vercel/insights/script.js" defer></script>
    <!-- End Vercel Analytics -->

    <!-- Vercel Speed Insights -->
    <script>
      window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
    <script src="/_vercel/speed-insights/script.js"></script>
    <!-- End Vercel Speed Insights -->

</body>
</html>

